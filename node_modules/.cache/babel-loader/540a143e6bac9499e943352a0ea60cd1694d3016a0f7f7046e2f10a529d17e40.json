{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RestClient = void 0;\nconst node_fetch_1 = __importDefault(require(\"node-fetch\"));\nconst config_1 = require(\"../config\");\nconst uuid_1 = require(\"uuid\");\nclass RestClient {\n  static generateIdempotencyKey() {\n    return (0, uuid_1.v4)();\n  }\n  static appendQueryParamsToUrl(url, queryParams) {\n    if (!queryParams) return url;\n    const searchParams = new URLSearchParams();\n    for (const key in queryParams) {\n      if (Object.prototype.hasOwnProperty.call(queryParams, key)) {\n        searchParams.append(key, queryParams[key].toString());\n      }\n    }\n    return url.includes('?') ? `${url}&${searchParams.toString()}` : `${url}?${searchParams.toString()}`;\n  }\n  static async retryWithExponentialBackoff(fn, retries) {\n    let attempt = 1;\n    const execute = async () => {\n      try {\n        return await fn();\n      } catch (error) {\n        if (attempt >= retries || error.status < 500) {\n          throw error;\n        }\n        const delayMs = config_1.AppConfig.BASE_DELAY_MS * 2 ** attempt;\n        await new Promise(resolve => setTimeout(resolve, delayMs));\n        attempt++;\n        return execute();\n      }\n    };\n    return execute();\n  }\n  static async fetch(endpoint, config) {\n    const _a = config || {},\n      {\n        timeout = config_1.AppConfig.DEFAULT_TIMEOUT,\n        idempotencyKey = RestClient.generateIdempotencyKey(),\n        queryParams,\n        method = 'GET',\n        retries = config_1.AppConfig.DEFAULT_RETRIES,\n        corporationId,\n        integratorId,\n        plataformId\n      } = _a,\n      customConfig = __rest(_a, [\"timeout\", \"idempotencyKey\", \"queryParams\", \"method\", \"retries\", \"corporationId\", \"integratorId\", \"plataformId\"]);\n    const url = RestClient.appendQueryParamsToUrl(`${config_1.AppConfig.BASE_URL}${endpoint}`, queryParams);\n    customConfig.headers = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, customConfig.headers), {\n      [config_1.AppConfig.Headers.CONTENT_TYPE]: 'application/json',\n      [config_1.AppConfig.Headers.PRODUCT_ID]: config_1.AppConfig.PRODUCT_ID,\n      [config_1.AppConfig.Headers.TRACKING_ID]: config_1.AppConfig.getTrackingId(),\n      [config_1.AppConfig.Headers.USER_AGENT]: config_1.AppConfig.getUserAgent()\n    }), corporationId ? {\n      [config_1.AppConfig.Headers.CORPORATION_ID]: corporationId\n    } : {}), integratorId ? {\n      [config_1.AppConfig.Headers.INTEGRATOR_ID]: integratorId\n    } : {}), plataformId ? {\n      [config_1.AppConfig.Headers.PLATFORM_ID]: plataformId\n    } : {});\n    if (method && method !== 'GET') {\n      customConfig.headers = Object.assign(Object.assign({}, customConfig.headers), {\n        [config_1.AppConfig.Headers.IDEMPOTENCY_KEY]: idempotencyKey\n      });\n    }\n    let response;\n    const fetchFn = async () => {\n      response = await (0, node_fetch_1.default)(url, Object.assign(Object.assign({}, customConfig), {\n        method,\n        timeout\n      }));\n      if (response.ok) {\n        const data = await response.json();\n        const api_response = {\n          status: response.status,\n          headers: response.headers.raw()\n        };\n        data.api_response = api_response;\n        return data;\n      } else {\n        throw await response.json();\n      }\n    };\n    return await RestClient.retryWithExponentialBackoff(fetchFn, retries);\n  }\n}\nexports.RestClient = RestClient;","map":{"version":3,"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","__importDefault","mod","__esModule","defineProperty","exports","value","RestClient","node_fetch_1","require","config_1","uuid_1","generateIdempotencyKey","v4","appendQueryParamsToUrl","url","queryParams","searchParams","URLSearchParams","key","append","toString","includes","retryWithExponentialBackoff","fn","retries","attempt","execute","error","status","delayMs","AppConfig","BASE_DELAY_MS","Promise","resolve","setTimeout","fetch","endpoint","config","_a","timeout","DEFAULT_TIMEOUT","idempotencyKey","method","DEFAULT_RETRIES","corporationId","integratorId","plataformId","customConfig","BASE_URL","headers","assign","Headers","CONTENT_TYPE","PRODUCT_ID","TRACKING_ID","getTrackingId","USER_AGENT","getUserAgent","CORPORATION_ID","INTEGRATOR_ID","PLATFORM_ID","IDEMPOTENCY_KEY","response","fetchFn","default","ok","data","json","api_response","raw"],"sources":["C:/Users/JZ4874/Documents/React/Raide Energy/raide-energy/node_modules/mercadopago/dist/utils/restClient/index.js"],"sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RestClient = void 0;\nconst node_fetch_1 = __importDefault(require(\"node-fetch\"));\nconst config_1 = require(\"../config\");\nconst uuid_1 = require(\"uuid\");\nclass RestClient {\n    static generateIdempotencyKey() {\n        return (0, uuid_1.v4)();\n    }\n    static appendQueryParamsToUrl(url, queryParams) {\n        if (!queryParams)\n            return url;\n        const searchParams = new URLSearchParams();\n        for (const key in queryParams) {\n            if (Object.prototype.hasOwnProperty.call(queryParams, key)) {\n                searchParams.append(key, queryParams[key].toString());\n            }\n        }\n        return url.includes('?') ? `${url}&${searchParams.toString()}` : `${url}?${searchParams.toString()}`;\n    }\n    static async retryWithExponentialBackoff(fn, retries) {\n        let attempt = 1;\n        const execute = async () => {\n            try {\n                return await fn();\n            }\n            catch (error) {\n                if (attempt >= retries || (error.status < 500)) {\n                    throw error;\n                }\n                const delayMs = config_1.AppConfig.BASE_DELAY_MS * 2 ** attempt;\n                await new Promise((resolve) => setTimeout(resolve, delayMs));\n                attempt++;\n                return execute();\n            }\n        };\n        return execute();\n    }\n    static async fetch(endpoint, config) {\n        const _a = config || {}, { timeout = config_1.AppConfig.DEFAULT_TIMEOUT, idempotencyKey = RestClient.generateIdempotencyKey(), queryParams, method = 'GET', retries = config_1.AppConfig.DEFAULT_RETRIES, corporationId, integratorId, plataformId } = _a, customConfig = __rest(_a, [\"timeout\", \"idempotencyKey\", \"queryParams\", \"method\", \"retries\", \"corporationId\", \"integratorId\", \"plataformId\"]);\n        const url = RestClient.appendQueryParamsToUrl(`${config_1.AppConfig.BASE_URL}${endpoint}`, queryParams);\n        customConfig.headers = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, customConfig.headers), { [config_1.AppConfig.Headers.CONTENT_TYPE]: 'application/json', [config_1.AppConfig.Headers.PRODUCT_ID]: config_1.AppConfig.PRODUCT_ID, [config_1.AppConfig.Headers.TRACKING_ID]: config_1.AppConfig.getTrackingId(), [config_1.AppConfig.Headers.USER_AGENT]: config_1.AppConfig.getUserAgent() }), (corporationId ? { [config_1.AppConfig.Headers.CORPORATION_ID]: corporationId } : {})), (integratorId ? { [config_1.AppConfig.Headers.INTEGRATOR_ID]: integratorId } : {})), (plataformId ? { [config_1.AppConfig.Headers.PLATFORM_ID]: plataformId } : {}));\n        if (method && method !== 'GET') {\n            customConfig.headers = Object.assign(Object.assign({}, customConfig.headers), { [config_1.AppConfig.Headers.IDEMPOTENCY_KEY]: idempotencyKey });\n        }\n        let response;\n        const fetchFn = async () => {\n            response = await (0, node_fetch_1.default)(url, Object.assign(Object.assign({}, customConfig), { method,\n                timeout }));\n            if (response.ok) {\n                const data = await response.json();\n                const api_response = {\n                    status: response.status,\n                    headers: response.headers.raw(),\n                };\n                data.api_response = api_response;\n                return data;\n            }\n            else {\n                throw await response.json();\n            }\n        };\n        return await RestClient.retryWithExponentialBackoff(fetchFn, retries);\n    }\n}\nexports.RestClient = RestClient;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}